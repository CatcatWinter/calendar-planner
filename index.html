<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Planner — 万能日历生成器</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i data-lucide="calendar-days"></i>
                    <span>Calendar Planner</span>
                </div>
                <nav class="nav">
                    <button class="nav-btn active" data-section="calendar">
                        <i data-lucide="calendar"></i>
                        <span>日历</span>
                    </button>
                    <button class="nav-btn" data-section="converter">
                        <i data-lucide="repeat"></i>
                        <span>转换</span>
                    </button>
                    <button class="nav-btn" data-section="planner">
                        <i data-lucide="target"></i>
                        <span>计划</span>
                    </button>
                </nav>
                <button class="theme-toggle" id="themeToggle">
                    <i data-lucide="moon"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Calendar Section -->
            <section class="section calendar-section active" id="calendar">
                <div class="section-header">
                    <h1>万能日历</h1>
                    <p class="section-subtitle">查看阳历与阴历日期，探索节气与节日</p>
                </div>

                <div class="calendar-container">
                    <div class="calendar-header">
                        <button class="calendar-nav-btn" id="prevMonth">
                            <i data-lucide="chevron-left"></i>
                        </button>
                        <div class="calendar-title">
                            <h2 id="currentMonth">2024年 1月</h2>
                            <span class="lunar-month" id="lunarMonth">甲辰年 腊月</span>
                        </div>
                        <button class="calendar-nav-btn" id="nextMonth">
                            <i data-lucide="chevron-right"></i>
                        </button>
                    </div>

                    <div class="calendar-weekdays">
                        <span>日</span>
                        <span>一</span>
                        <span>二</span>
                        <span>三</span>
                        <span>四</span>
                        <span>五</span>
                        <span>六</span>
                    </div>

                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar days will be generated by JavaScript -->
                    </div>

                    <div class="calendar-footer">
                        <button class="today-btn" id="todayBtn">
                            <i data-lucide="circle-dot"></i>
                            <span>今天</span>
                        </button>
                        <div class="year-month-selector">
                            <select id="yearSelect"></select>
                            <select id="monthSelect">
                                <option value="0">一月</option>
                                <option value="1">二月</option>
                                <option value="2">三月</option>
                                <option value="3">四月</option>
                                <option value="4">五月</option>
                                <option value="5">六月</option>
                                <option value="6">七月</option>
                                <option value="7">八月</option>
                                <option value="8">九月</option>
                                <option value="9">十月</option>
                                <option value="10">十一月</option>
                                <option value="11">十二月</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Date Detail Panel -->
                <div class="date-detail-panel" id="dateDetailPanel">
                    <div class="detail-header">
                        <h3>日期详情</h3>
                        <button class="close-panel-btn" id="closePanelBtn">
                            <i data-lucide="x"></i>
                        </button>
                    </div>
                    <div class="detail-content" id="dateDetailContent">
                        <div class="detail-solar">
                            <span class="detail-day" id="detailDay">1</span>
                            <div class="detail-info">
                                <span class="detail-solar-date" id="detailSolarDate">2024年1月1日</span>
                                <span class="detail-weekday" id="detailWeekday">星期一</span>
                            </div>
                        </div>
                        <div class="detail-divider"></div>
                        <div class="detail-lunar">
                            <div class="detail-row">
                                <i data-lucide="moon"></i>
                                <span id="detailLunarDate">农历十一月二十</span>
                            </div>
                            <div class="detail-row">
                                <i data-lucide="calendar-check"></i>
                                <span id="detailGanzhi">甲辰年 乙丑月 丙寅日</span>
                            </div>
                            <div class="detail-row" id="detailSolarTermRow" style="display: none;">
                                <i data-lucide="sun"></i>
                                <span id="detailSolarTerm"></span>
                            </div>
                            <div class="detail-row" id="detailFestivalRow" style="display: none;">
                                <i data-lucide="party-popper"></i>
                                <span id="detailFestival"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Converter Section -->
            <section class="section converter-section" id="converter">
                <div class="section-header">
                    <h1>阴阳历转换</h1>
                    <p class="section-subtitle">精确转换公历与农历日期</p>
                </div>

                <div class="converter-container">
                    <div class="converter-card">
                        <div class="converter-tab-group">
                            <button class="converter-tab active" data-type="solar-to-lunar">
                                <i data-lucide="sun"></i>
                                <span>阳历转阴历</span>
                            </button>
                            <button class="converter-tab" data-type="lunar-to-solar">
                                <i data-lucide="moon"></i>
                                <span>阴历转阳历</span>
                            </button>
                        </div>

                        <div class="converter-content">
                            <!-- Solar to Lunar -->
                            <div class="converter-form active" id="solarToLunarForm">
                                <div class="input-group">
                                    <label>公历日期</label>
                                    <div class="date-inputs">
                                        <select id="solarYear" class="date-select"></select>
                                        <select id="solarMonth" class="date-select"></select>
                                        <select id="solarDay" class="date-select"></select>
                                    </div>
                                </div>
                                <button class="convert-btn" id="convertToLunarBtn">
                                    <i data-lucide="arrow-down"></i>
                                    <span>转换</span>
                                </button>
                                <div class="convert-result" id="lunarResult">
                                    <div class="result-label">农历日期</div>
                                    <div class="result-value" id="lunarResultValue">—</div>
                                    <div class="result-extra" id="lunarResultExtra"></div>
                                </div>
                            </div>

                            <!-- Lunar to Solar -->
                            <div class="converter-form" id="lunarToSolarForm">
                                <div class="input-group">
                                    <label>农历日期</label>
                                    <div class="date-inputs">
                                        <select id="lunarYear" class="date-select"></select>
                                        <select id="lunarMonthSelect" class="date-select"></select>
                                        <select id="lunarDay" class="date-select"></select>
                                    </div>
                                    <div class="leap-month-toggle">
                                        <input type="checkbox" id="isLeapMonth">
                                        <label for="isLeapMonth">闰月</label>
                                    </div>
                                </div>
                                <button class="convert-btn" id="convertToSolarBtn">
                                    <i data-lucide="arrow-down"></i>
                                    <span>转换</span>
                                </button>
                                <div class="convert-result" id="solarResult">
                                    <div class="result-label">公历日期</div>
                                    <div class="result-value" id="solarResultValue">—</div>
                                    <div class="result-extra" id="solarResultExtra"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Reference -->
                    <div class="quick-reference">
                        <h3>节气速查</h3>
                        <div class="solar-terms-grid" id="solarTermsGrid">
                            <!-- Generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Planner Section -->
            <section class="section planner-section" id="planner">
                <div class="section-header">
                    <h1>智能计划生成</h1>
                    <p class="section-subtitle">输入目标，生成可执行的落地计划</p>
                </div>

                <div class="planner-container">
                    <div class="planner-input-area">
                        <div class="input-card">
                            <div class="input-group">
                                <label>
                                    <i data-lucide="target"></i>
                                    项目或目标名称
                                </label>
                                <input type="text" id="goalTitle" placeholder="例如：学习日语N2" maxlength="100">
                            </div>

                            <div class="input-group">
                                <label>
                                    <i data-lucide="file-text"></i>
                                    详细描述
                                </label>
                                <textarea id="goalDescription" placeholder="描述您的目标、当前水平、期望达成的具体成果..." rows="4"></textarea>
                            </div>

                            <div class="input-row">
                                <div class="input-group half">
                                    <label>
                                        <i data-lucide="calendar-plus"></i>
                                        开始日期
                                    </label>
                                    <input type="date" id="startDate">
                                </div>
                                <div class="input-group half">
                                    <label>
                                        <i data-lucide="calendar-check"></i>
                                        目标日期
                                    </label>
                                    <input type="date" id="endDate">
                                </div>
                            </div>

                            <div class="input-group">
                                <label>
                                    <i data-lucide="clock"></i>
                                    每日可投入时间
                                </label>
                                <div class="time-options">
                                    <button class="time-option" data-hours="0.5">30分钟</button>
                                    <button class="time-option active" data-hours="1">1小时</button>
                                    <button class="time-option" data-hours="2">2小时</button>
                                    <button class="time-option" data-hours="3">3小时</button>
                                    <button class="time-option" data-hours="4">4小时+</button>
                                </div>
                            </div>

                            <div class="input-group">
                                <label>
                                    <i data-lucide="sliders"></i>
                                    计划强度
                                </label>
                                <div class="intensity-slider">
                                    <input type="range" id="intensitySlider" min="1" max="5" value="3">
                                    <div class="intensity-labels">
                                        <span>轻松</span>
                                        <span>适中</span>
                                        <span>紧凑</span>
                                    </div>
                                </div>
                            </div>

                            <button class="generate-btn" id="generatePlanBtn">
                                <i data-lucide="sparkles"></i>
                                <span>生成智能计划</span>
                            </button>
                        </div>
                    </div>

                    <div class="planner-result-area" id="plannerResultArea">
                        <div class="result-placeholder">
                            <i data-lucide="layout-list"></i>
                            <p>输入您的目标信息后，智能计划将在这里生成</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Calendar Planner &copy; 2024. Designed with precision.</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i data-lucide="loader-2"></i>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="js/utils.js"></script>
    <script src="js/lunar.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/planner.js"></script>
    <script src="js/app.js"></script>
</body>
</html>